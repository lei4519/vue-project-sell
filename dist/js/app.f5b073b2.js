(function(t){function s(s){for(var a,r,o=s[0],c=s[1],l=s[2],d=0,p=[];d<o.length;d++)r=o[d],i[r]&&p.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(s);while(p.length)p.shift()();return n.push.apply(n,l||[]),e()}function e(){for(var t,s=0;s<n.length;s++){for(var e=n[s],a=!0,o=1;o<e.length;o++){var c=e[o];0!==i[c]&&(a=!1)}a&&(n.splice(s--,1),t=r(r.s=e[0]))}return t}var a={},i={app:0},n=[];function r(s){if(a[s])return a[s].exports;var e=a[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=a,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var a in t)r.d(e,a,function(s){return t[s]}.bind(null,a));return e},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var u=c;n.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"02ca":function(t,s,e){},"198b":function(t,s,e){},2029:function(t,s,e){},"202d":function(t,s,e){},"338d":function(t,s,e){"use strict";var a=e("a868"),i=e.n(a);i.a},"4af3":function(t,s,e){},"56d7":function(t,s,e){"use strict";e.r(s);e("cadf"),e("551c"),e("097d");var a=e("2b0e"),i=e("bc3a"),n=e.n(i),r=e("a7fe"),o=e.n(r),c=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app"},[e("v-header"),e("div",{staticClass:"tab border-1px"},[e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/goods"}},[t._v("商品")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/ratings"}},[t._v("评论")])],1),e("div",{staticClass:"tab-item"},[e("router-link",{attrs:{to:"/seller"}},[t._v("商家")])],1)]),e("transition",[e("keep-alive",[e("router-view")],1)],1)],1)},l=[],u=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"header"},[e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{width:"64",height:"64",src:t.seller.avatar}})]),e("div",{staticClass:"content"},[e("div",{staticClass:"title"},[e("span",{staticClass:"brand"}),e("span",{staticClass:"name"},[t._v(t._s(t.seller.name))])]),e("div",{staticClass:"description"},[t._v(t._s(t.seller.description)+"/"+t._s(t.seller.deliveryTime)+"分钟送达")]),t.seller.supports?e("div",{staticClass:"support"},[e("span",{class:["icon",t.classMap[t.seller.supports[0].type]]}),e("span",{staticClass:"text"},[t._v(t._s(t.seller.supports[0].description))])]):t._e()]),t.seller.supports?e("div",{staticClass:"support-count",on:{click:t.showDetail}},[e("span",{staticClass:"count"},[t._v(t._s(t.seller.supports.length)+"个")]),e("i",{staticClass:"icon-keyboard_arrow_right"})]):t._e()]),e("div",{staticClass:"bulletin-wrapper",on:{click:t.showDetail}},[e("span",{staticClass:"bulletin-title"}),e("span",{staticClass:"bulletin-text"},[t._v(t._s(t.seller.bulletin))]),e("i",{staticClass:"icon-keyboard_arrow_right"})]),e("div",{staticClass:"background"},[e("img",{attrs:{src:t.seller.avatar,width:"100%",height:"100%"}})]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],staticClass:"detail"},[e("div",{staticClass:"detail-wrapper clearfix"},[e("div",{staticClass:"detail-main"},[e("h1",{staticClass:"name"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"star-wrapper"},[e("Star",{attrs:{size:48,score:t.seller.score}})],1),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"text"},[t._v("优惠信息")]),e("div",{staticClass:"line"})]),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s,a){return e("li",{key:a,staticClass:"support-item"},[e("span",{class:["icon",t.classMap[s.type]]}),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])})):t._e(),e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),e("div",{staticClass:"text"},[t._v("商家公告")]),e("div",{staticClass:"line"})]),e("div",{staticClass:"bulletin"},[e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))])])])]),e("div",{staticClass:"detail-close",on:{click:t.hiddenDetail}},[e("i",{staticClass:"icon-close"})])])])],1)},d=[],p=(e("96cf"),e("3040")),v=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:["star",t.starType]},t._l(t.itemClasses,function(t,s){return e("span",{key:s,class:["star-item",t]})}))},f=[],h=(e("c5f6"),5),C="on",m="half",_="off",g={props:{size:{type:Number},score:{type:Number}},computed:{starType:function(){return"star-".concat(this.size)},itemClasses:function(){var t=[],s=Math.floor(2*this.score)/2,e=s%1!==0,a=Math.floor(s);while(a--)t.push(C);e&&t.push(m);while(t.length<h)t.push(_);return t}}},w=g,y=(e("865f"),e("2877")),b=Object(y["a"])(w,v,f,!1,null,"f24b0210",null);b.options.__file="star.vue";var x=b.exports,k={data:function(){return{classMap:["decrease","discount","special","invoice","guarantee"],detailShow:!1,seller:[]}},methods:{showDetail:function(){this.detailShow=!0},hiddenDetail:function(){this.detailShow=!1}},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.get("/api/seller");case 3:s=t.sent.data,0===s.errCode&&(this.seller=s.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0.message);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),components:{Star:x}},S=k,T=(e("9449"),Object(y["a"])(S,u,d,!1,null,"06291432",null));T.options.__file="header.vue";var N=T.exports,$={components:{"v-header":N}},L=$,E=(e("9cc1"),Object(y["a"])(L,c,l,!1,null,"ac647a8e",null));E.options.__file="App.vue";var I=E.exports,O=e("8c4f"),j=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods-wrapper"},[e("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[e("ul",{ref:"goodsList"},t._l(t.goodsList,function(s,a){return e("li",{key:a,staticClass:"menu-item",class:{current:t.checkedIndex===a},on:{click:function(s){t.selectedMenu(a,s)}}},[e("span",{staticClass:"text"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.type>0,expression:"item.type>0"}],staticClass:"icon",class:t.classMap[s.type]}),t._v("\n          "+t._s(s.name)+"\n        ")])])}))]),e("div",{ref:"foodsWrapper",staticClass:"foods-wrapper"},[e("ul",{ref:"goodsInfo"},t._l(t.goodsList,function(s,a){return e("li",{key:a,staticClass:"food-list"},[e("h2",{staticClass:"title"},[t._v(t._s(s.name))]),e("ul",t._l(s.foods,function(s,i){return e("li",{key:i,staticClass:"food-item"},[e("div",{staticClass:"icon"},[e("img",{attrs:{src:s.icon,width:"57",height:"57"}})]),e("div",{staticClass:"content"},[e("h3",{staticClass:"name",on:{click:function(e){t.selectedFood=s,t.isFoodShow=!0}}},[t._v(t._s(s.name))]),e("p",{staticClass:"describe"},[t._v(t._s(s.description))]),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(s.sellCount)+"份")]),e("span",[t._v("好评率"+t._s(s.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("¥"+t._s(s.price))]),s.oldPrice?e("del",{staticClass:"old"},[t._v("¥"+t._s(s.oldPrice))]):t._e()]),e("div",{staticClass:"cartcontrol-wrapper"},[e("cart-control",{attrs:{lv1:a,lv2:i,productNum:s.productNum},on:{cartAdd:t.cartAdd}})],1)])])}))])}))]),e("shop-cart",{ref:"shopCart"}),e("transition",[t.isFoodShow?e("goods-info",{attrs:{food:t.selectedFood},on:{closeFoodInfo:t.closeFoodInfo,cartAdd:t.cartAdd}}):t._e()],1)],1)},P=[],F=(e("ac6a"),e("20d6"),e("1c4c"),e("1fba")),R=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"cartcontrol"},[e("transition",{attrs:{name:"move"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.productNum,expression:"productNum"}],staticClass:"cart-decrease",on:{click:function(s){t.alterProductNum("sub",s)}}},[e("span",{staticClass:"inner icon-remove_circle_outline"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.productNum,expression:"productNum"}],staticClass:"cart-count"},[t._v(t._s(t.productNum))]),e("div",{staticClass:"cart-add icon-add_circle",on:{click:function(s){t.alterProductNum("add",s)}}})],1)},M=[],A={props:{productNum:{type:Number,required:!0},lv1:{type:Number,required:!0},lv2:{type:Number,required:!0}},methods:{alterProductNum:function(t,s){var e=0;if("sub"===t){if(0===this.productNum)return;e=-1}else e=1,this.$emit("cartAdd",s.target);this.$store.commit("alterProductNum",{lv1:this.lv1,lv2:this.lv2,count:e})}}},B=A,W=(e("fb6e"),Object(y["a"])(B,R,M,!1,null,"41a9c9bc",null));W.options.__file="cartControl.vue";var z=W.exports,D=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop-cart"},[e("div",{staticClass:"content"},[e("div",{staticClass:"content-left",on:{click:t.setListShow}},[e("div",{staticClass:"logo-wrapper"},[e("div",{staticClass:"logo",class:{highlight:t.productInfo.count}},[e("i",{staticClass:"icon-shopping_cart"})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.productInfo.count,expression:"productInfo.count"}],staticClass:"num"},[t._v(t._s(t.productInfo.count))])]),e("div",{staticClass:"price",class:{highlight:t.productInfo.total}},[t._v("￥ "+t._s(t.productInfo.total))]),e("div",{staticClass:"desc"},[t._v("另需配送费 ￥"+t._s(t.seller.deliveryPrice)+"元")])]),e("div",{staticClass:"content-right"},[e("div",{staticClass:"pay",class:["去结算"===t.text?"enough":"not-enough"],domProps:{textContent:t._s(t.text)},on:{click:t.pay}})])]),e("div",{staticClass:"ball-container"},t._l(t.balls,function(s,a){return e("div",{key:a},[e("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"ball.show"}],staticClass:"ball"},[e("div",{staticClass:"inner inner-hook"})])])],1)})),e("transition",{attrs:{name:"down2up"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isListShow,expression:"isListShow"}],ref:"shop-cart-list",staticClass:"shop-cart-list"},[e("div",{staticClass:"list-header"},[e("h1",{staticClass:"title"},[t._v("购物车")]),e("span",{staticClass:"empty",on:{click:function(s){t.$store.commit("clearProductList")}}},[t._v("清空")])]),e("div",{ref:"listContent",staticClass:"list-content"},[e("ul",t._l(t.productInfo.list,function(s,a){return e("li",{key:a,staticClass:"food"},[e("span",{staticClass:"name"},[t._v(t._s(s.name))]),e("div",{staticClass:"price"},[e("span",[t._v("￥"+t._s(s.productNum*s.price))])]),e("div",{staticClass:"cartcontrol-wrapper"},[e("cart-control",{attrs:{productNum:s.productNum,lv1:s.lv1,lv2:s.lv2},on:{cartAdd:t.cartAdd}})],1)])}))])])]),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isListShow,expression:"isListShow"}],staticClass:"list-mask",on:{click:t.setListShow}})])],1)},H=[],Y="inner-hook",q={data:function(){return{seller:[],isListClick:!1,balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],scroll:null}},methods:{pay:function(){this.productInfo.total<20||window.alert("支付".concat(this.productInfo.total,"元"))},setListShow:function(){0!==this.productInfo.count&&(this.isListClick=!this.isListClick)},cartAdd:function(t){this.drop(t)},drop:function(t){for(var s=0;s<this.balls.length;s++){var e=this.balls[s];if(!e.show)return e.show=!0,e.el=t,void this.dropBalls.push(e)}},beforeEnter:function(t){var s=this.dropBalls[this.dropBalls.length-1],e=s.el.getBoundingClientRect(),a=e.left-32,i=-(window.innerHeight-e.top-22);t.style.display="",t.style.transform=t.style.webkitTransform="translate3d(0,".concat(i,"px,0)");var n=t.getElementsByClassName(Y)[0];n.style.transform=n.style.webkitTransform="translate3d(".concat(a,"px,0,0)")},enter:function(t,s){this._reflow=document.body.offsetHeight,t.style.transform=t.style.webkitTransform="translate3d(0,0,0)";var e=t.getElementsByClassName(Y)[0];e.style.transform=e.style.webkitTransform="translate3d(0,0,0)",t.addEventListener("transitionend",s)},afterEnter:function(t){var s=this.dropBalls.shift();s&&(s.show=!1,t.style.display="none")}},computed:{productInfo:function(){var t={total:0,count:0,list:[]};return this.$store.state.goodsList.forEach(function(s){s.foods.forEach(function(s){s.productNum>0&&(t.list.push(s),t.count+=s.productNum,t.total+=s.productNum*s.price)})}),t},text:function(){return 0===this.productInfo.total?"￥".concat(this.seller.minPrice,"起送"):this.productInfo.total<this.seller.minPrice?"还差￥".concat(this.seller.minPrice-this.productInfo.total,"起送"):"去结算"},isListShow:function(){var t=this;0===this.productInfo.count&&(this.isListClick=!1);var s=0!==this.productInfo.count&&!0===this.isListClick;return this.scroll||s&&this.$nextTick(function(){t.scroll=new F["a"](t.$refs.listContent,{click:!0})}),s}},components:{cartControl:z},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.get("/api/seller");case 3:s=t.sent.data,0===s.errCode&&(this.seller=s.data),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0.message);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}()},G=q,J=(e("db51"),Object(y["a"])(G,D,H,!1,null,"00c2004d",null));J.options.__file="shopCart.vue";var X=J.exports,K=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"food-wrapper"},[e("div",{staticClass:"content"},[e("div",{staticClass:"banner"},[e("img",{attrs:{src:t.food.image}})]),e("div",{staticClass:"food-content"},[e("div",{staticClass:"title"},[t._v(t._s(t.food.name))]),e("div",{staticClass:"extra"},[e("span",{staticClass:"count"},[t._v("月售"+t._s(t.food.sellCount)+"份")]),e("span",[t._v("好评率"+t._s(t.food.rating)+"%")])]),e("div",{staticClass:"price"},[e("span",{staticClass:"now"},[t._v("￥"+t._s(t.food.price))]),t.food.oldPrice?e("del",{staticClass:"old"},[t._v(t._s(t.food.oldPrice))]):t._e()]),e("div",{staticClass:"cartcontrol-wrapper"},[e("cart-control",{ref:"cartCtrl",attrs:{productNum:t.food.productNum,lv1:t.food.lv1,lv2:t.food.lv2},on:{cartAdd:t.cartAdd}})],1),e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.productNum,expression:"!food.productNum"}],staticClass:"add-food",on:{click:function(s){t.addFood(s)}}},[t._v("加入购物车")])])],1),e("div",{staticClass:"split"}),e("div",{staticClass:"info"},[e("div",{staticClass:"title"},[t._v("商品介绍")]),e("div",{staticClass:"desc"},[t._v(t._s(t.food.info))])]),e("div",{staticClass:"back",on:{click:function(s){t.$emit("closeFoodInfo")}}},[e("i",{staticClass:"icon-arrow_lift"})]),e("div",{staticClass:"split"}),e("div",{staticClass:"rating"},[e("div",{staticClass:"title"},[t._v("商品评价")]),e("rating-select",{attrs:{rating:t.food.ratings,selectType:t.selectType,onlyContent:t.onlyContent,desc:t.desc},on:{toggleContent:t.toggleContent,select:t.select}}),e("div",{staticClass:"rating-wrapper"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.ratings||!t.food.ratings.length,expression:"!food.ratings || !food.ratings.length"}],staticClass:"no-rating"},[t._v("\n                    还没有人评论呦~\n                ")]),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.food.ratings&&t.food.ratings.length,expression:"food.ratings && food.ratings.length"}]},t._l(t.food.ratings,function(s,a){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.isRatingShow(s),expression:"isRatingShow(rating)"}],key:a,staticClass:"rating-item"},[e("div",{staticClass:"rating-info"},[e("div",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(s.rateTime)))]),e("div",{staticClass:"user"},[e("span",{staticClass:"username"},[t._v(t._s(s.username))]),e("img",{staticClass:"avatar",attrs:{src:s.avatar,height:"12px",width:"12px"}})])]),e("div",{staticClass:"rating-content"},[e("span",{staticClass:"praise",class:[s.rateType?"icon-thumb_down":"icon-thumb_up"]}),e("span",{staticClass:"text"},[t._v(t._s(s.text))])])])}))])],1)])])},Q=[],U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"rating-select"},[e("div",{staticClass:"rating-type"},[e("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(s){t.$emit("select",2,s)}}},[t._v("\n            "+t._s(t.desc.all)+"\n            "),e("span",{staticClass:"count"},[t._v(t._s(t.rating.length))])]),e("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(s){t.$emit("select",0,s)}}},[t._v("\n            "+t._s(t.desc.positive)+"\n            "),e("span",{staticClass:"count"},[t._v(t._s(t.positives.length))])]),e("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(s){t.$emit("select",1,s)}}},[t._v("\n            "+t._s(t.desc.negative)+"\n            "),e("span",{staticClass:"count"},[t._v(t._s(t.negatives.length))])])]),e("div",{staticClass:"switch",class:{on:t.onlyContent},on:{click:function(s){t.$emit("toggleContent",s)}}},[e("span",{staticClass:"icon-check_circle"}),e("span",{staticClass:"text"},[t._v("只看有内容的评价")])])])},V=[],Z=0,tt=1,st=2,et={props:{rating:{type:Array,default:function(){return[]}},selectType:{type:Number,default:st},onlyContent:{type:Boolean,default:!1},desc:{type:Object,default:function(){return{all:"全部",positive:"满意",negative:"不满意"}}}},computed:{positives:function(){return this.rating.filter(function(t){return t.rateType===Z})},negatives:function(){return this.rating.filter(function(t){return t.rateType===tt})}}},at=et,it=(e("9250"),Object(y["a"])(at,U,V,!1,null,"5c1f3916",null));it.options.__file="ratingSelect.vue";var nt=it.exports,rt=2,ot={props:{food:{type:Object,required:!0}},data:function(){return{scroll:null,selectType:rt,onlyContent:!1,desc:{all:"全部",positive:"推荐",negative:"吐槽"}}},methods:{isRatingShow:function(t){return!(this.onlyContent&&!t.text)&&(2===this.selectType||t.rateType===this.selectType)},addFood:function(t){this.$refs.cartCtrl.alterProductNum("add",t)},cartAdd:function(t){this.$emit("cartAdd",t)},select:function(t,s){var e=this;s._constructed&&(this.selectType=t,this.$nextTick(function(){e.scroll.refresh()}))},toggleContent:function(t){var s=this;t._constructed&&(this.onlyContent=!this.onlyContent,this.$nextTick(function(){s.scroll.refresh()}))}},components:{cartControl:z,ratingSelect:nt},mounted:function(){this.scroll?this.scroll.refresh():this.scroll=new F["a"](".food-wrapper",{click:!0})}},ct=ot,lt=(e("6aca"),Object(y["a"])(ct,K,Q,!1,null,"65c18c1c",null));lt.options.__file="goodsInfo.vue";var ut=lt.exports,dt={name:"goods",data:function(){return{classMap:["decrease","discount","special","invoice","guarantee"],scrollHeightList:[],foodsScroll:null,menuScroll:null,scrollY:0,isFoodShow:!1,selectedFood:null}},methods:{_initScroll:function(){this.menuScroll?this.menuScroll.refresh():this.menuScroll=new F["a"](this.$refs.menuWrapper,{click:!0}),this.foodsScroll?this.menuScroll.refresh():this.foodsScroll=new F["a"](this.$refs.foodsWrapper,{probeType:3,click:!0});var t=Array.from(this.$refs.goodsInfo.children);this.scrollHeightList=t.map(function(t){return t.offsetTop})},selectedMenu:function(t,s){s._constructed&&this.foodsScroll.scrollToElement(this.$refs.goodsInfo.children[t],300)},cartAdd:function(t){var s=this;this.$nextTick(function(){s.$refs.shopCart.drop(t)})},closeFoodInfo:function(){this.isFoodShow=!1}},computed:{goodsList:function(){return this.$store.state.goodsList},checkedIndex:function(){var t=this,s=this.scrollHeightList.findIndex(function(s){return s>Math.abs(t.scrollY)});return-1!==s?s-1:this.scrollHeightList.length-1}},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var s,e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.get("/api/goods");case 3:s=t.sent.data,0===s.errCode?(s.data.forEach(function(t,s){t.foods.forEach(function(t,e){t.lv1=s,t.lv2=e,t.productNum=0})}),this.$store.commit("initGoodsList",s.data),this.$nextTick(function(){e._initScroll(),e.foodsScroll.on("scroll",function(t){e.scrollY=t.y,e.menuScroll.scrollToElement(e.$refs.goodsList.children[e.checkedIndex],300)})})):alert("商品信息获取失败"),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),alert(t.t0.message);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(){return t.apply(this,arguments)}}(),components:{cartControl:z,shopCart:X,goodsInfo:ut}},pt=dt,vt=(e("f728"),Object(y["a"])(pt,j,P,!1,null,"c47e0b4a",null));vt.options.__file="goods.vue";var ft=vt.exports,ht=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"ratingsWrapper",staticClass:"ratings-wrapper"},[e("div",{staticClass:"ratings"},[e("div",{staticClass:"overview"},[e("div",{staticClass:"overview-left"},[e("h1",{staticClass:"score"},[t._v(t._s(t.seller.score))]),e("div",{staticClass:"title"},[t._v("综合评分")]),e("div",{staticClass:"rank"},[t._v("高于周边商家"+t._s(t.seller.rankRate)+"%")])]),e("div",{staticClass:"overview-right"},[e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("服务态度")]),e("Star",{staticClass:"star",attrs:{size:36,score:t.seller.serviceScore}}),e("span",{staticClass:"score"},[t._v(t._s(t.seller.serviceScore))])],1),e("div",{staticClass:"score-wrapper"},[e("span",{staticClass:"title"},[t._v("商品评分")]),e("Star",{staticClass:"star",attrs:{size:36,score:t.seller.foodScore}}),e("span",{staticClass:"score"},[t._v(t._s(t.seller.foodScore))])],1),e("div",{staticClass:"delivery-wrapper"},[e("span",{staticClass:"title"},[t._v("送达时间")]),e("span",{staticClass:"delivery"},[t._v(t._s(t.seller.deliveryTime)+"分钟")])])])]),e("div",{staticClass:"split"}),e("rating-select",{attrs:{rating:t.ratings,selectType:t.selectType,onlyContent:t.onlyContent,desc:t.desc},on:{toggleContent:t.toggleContent,select:t.select}}),e("div",{staticClass:"ratings-info"},[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.ratings&&t.ratings.length,expression:"ratings && ratings.length"}]},t._l(t.ratings,function(s,a){return e("li",{directives:[{name:"show",rawName:"v-show",value:t.isRatingShow(s),expression:"isRatingShow(rating)"}],key:a,staticClass:"rating-item"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:s.avatar,height:"28",width:"28"}})]),e("div",{staticClass:"content"},[e("h2",{staticClass:"name"},[t._v(t._s(s.username))]),e("div",{staticClass:"star-wrapper"},[e("Star",{staticClass:"star",attrs:{size:24,score:s.score}}),s.deliveryTime?e("span",{staticClass:"delivery"},[t._v(t._s(s.deliveryTime)+"分钟送达")]):t._e()],1),e("p",{staticClass:"text"},[t._v(t._s(s.text))]),e("div",{staticClass:"recommend"},[e("span",{staticClass:"icon",class:[s.rateType?"icon-thumb_down":"icon-thumb_up"]}),t._l(s.recommend,function(s,a){return e("span",{key:a,staticClass:"item"},[t._v(t._s(s))])})],2),e("div",{staticClass:"time"},[t._v(t._s(t._f("dateFormat")(s.rateTime)))])])])}))])],1)])},Ct=[],mt=2,_t={data:function(){return{scroll:null,seller:[],ratings:[],selectType:mt,onlyContent:!1,desc:{all:"全部",positive:"满意",negative:"不满意"}}},methods:{isRatingShow:function(t){return!(this.onlyContent&&!t.text)&&(2===this.selectType||t.rateType===this.selectType)},select:function(t,s){var e=this;s._constructed&&(this.selectType=t,this.$nextTick(function(){e.scroll.refresh()}))},toggleContent:function(t){var s=this;t._constructed&&(this.onlyContent=!this.onlyContent,this.$nextTick(function(){s.scroll.refresh()}))}},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var s,e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.get("/api/seller");case 3:return s=t.sent.data,t.next=6,this.axios.get("/api/rating");case 6:e=t.sent.data,0===s.errCode&&(this.seller=s.data),0===e.errCode&&(this.ratings=e.data),this.scroll?this.scroll.refresh():this.$nextTick(function(){a.scroll=new F["a"](a.$refs.ratingsWrapper,{click:!0})}),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),alert(t.t0.message);case 15:case"end":return t.stop()}},t,this,[[0,12]])}));return function(){return t.apply(this,arguments)}}(),components:{Star:x,ratingSelect:nt}},gt=_t,wt=(e("338d"),Object(y["a"])(gt,ht,Ct,!1,null,"78735682",null));wt.options.__file="ratings.vue";var yt=wt.exports,bt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"sellerWrapper",staticClass:"seller-wrapper"},[e("div",{staticClass:"seller-content"},[e("div",{staticClass:"overview"},[e("h1",{staticClass:"title"},[t._v(t._s(t.seller.name))]),e("div",{staticClass:"desc"},[e("Star",{staticClass:"star",attrs:{size:36,score:t.seller.score}}),e("span",{staticClass:"text"},[t._v("("+t._s(t.seller.ratingCount)+")")]),e("span",{staticClass:"text"},[t._v("月售"+t._s(t.seller.sellCount)+"单")])],1),e("div",{staticClass:"favorite",on:{click:t.toggleFavorite}},[e("span",{staticClass:"icon icon-favorite",class:{fav:t.isFavorite}}),e("span",{staticClass:"text"},[t._v("收藏")])]),e("ul",{staticClass:"remark"},[e("li",{staticClass:"block"},[e("h2",[t._v("起送价")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.minPrice))]),t._v("元\n          ")])]),e("li",{staticClass:"block"},[e("h2",[t._v("商家配送")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryPrice))]),t._v("元\n          ")])]),e("li",{staticClass:"block"},[e("h2",[t._v("平均配送时间")]),e("div",{staticClass:"content"},[e("span",{staticClass:"stress"},[t._v(t._s(t.seller.deliveryTime))]),t._v("元\n          ")])])])]),e("div",{staticClass:"split"}),e("div",{staticClass:"bulletin"},[e("h2",{staticClass:"title"},[t._v("公告与活动")]),e("p",{staticClass:"content"},[t._v(t._s(t.seller.bulletin))]),t.seller.supports?e("ul",{staticClass:"supports"},t._l(t.seller.supports,function(s,a){return e("li",{key:a,staticClass:"support-item"},[e("span",{class:["icon",t.classMap[s.type]]}),e("span",{staticClass:"text"},[t._v(t._s(s.description))])])})):t._e()]),e("div",{staticClass:"split"}),e("div",{staticClass:"pics"},[e("h2",{staticClass:"title"},[t._v("商家实景")]),e("div",{ref:"picList",staticClass:"pic-wrapper"},[e("ul",{staticClass:"pic-list"},t._l(t.seller.pics,function(t,s){return e("li",{key:s,staticClass:"pic-item"},[e("img",{attrs:{src:t}})])}))])]),e("div",{staticClass:"split"}),e("div",{staticClass:"info"},[e("h2",{staticClass:"title"},[t._v("商家信息")]),e("ul",t._l(t.seller.infos,function(s,a){return e("li",{key:a,staticClass:"info-item"},[t._v(t._s(s))])}))])])])},xt=[],kt={data:function(){return{classMap:["decrease","discount","special","invoice","guarantee"],scroll:null,picListScroll:null,seller:[],isFavorite:!1}},methods:{toggleFavorite:function(){this.isFavorite=!this.isFavorite}},created:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(){var s,e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.axios.get("/api/seller");case 3:s=t.sent.data,0===s.errCode&&(this.seller=s.data),this.$nextTick(function(){e.$refs.picList.children[0].style.width=126*e.seller.pics.length+"px"}),this.scroll?this.scroll.refresh():this.$nextTick(function(){e.scroll=new F["a"](e.$refs.sellerWrapper,{click:!0}),e.picListScroll=new F["a"](e.$refs.picList,{scrollY:!1,scrollX:!0})}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),alert(t.t0.message);case 12:case"end":return t.stop()}},t,this,[[0,9]])}));return function(){return t.apply(this,arguments)}}(),components:{Star:x}},St=kt,Tt=(e("679b"),Object(y["a"])(St,bt,xt,!1,null,"84249364",null));Tt.options.__file="seller.vue";var Nt=Tt.exports;a["a"].use(O["a"]);var $t=new O["a"]({mode:"history",base:"/",linkActiveClass:"active",routes:[{path:"/",redirect:"/goods"},{path:"/goods",component:ft,meta:{keepAlive:!0}},{path:"/ratings",component:yt},{path:"/seller",component:Nt}]}),Lt=e("2f62");a["a"].use(Lt["a"]);var Et=new Lt["a"].Store({state:{goodsList:[]},mutations:{initGoodsList:function(t,s){t.goodsList=s},alterProductNum:function(t,s){t.goodsList[s.lv1].foods[s.lv2].productNum+=s.count},clearProductList:function(t){t.goodsList.forEach(function(t){t.foods.forEach(function(t){t.productNum=0})})}}});e("202d"),e("f576"),e("3b2b"),e("a481");function It(t,s){t=new Date(t),/(y+)/.test(s)&&(s=s.replace(RegExp.$1,"".concat(t.getFullYear()).substr(4-RegExp.$1.length)));var e={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in e)new RegExp("(".concat(a,")")).test(s)&&(s=s.replace(RegExp.$1,"".concat(e[a]).padStart(2,"0")));return s}a["a"].use(o.a,n.a),a["a"].config.productionTip=!1,a["a"].filter("dateFormat",function(t){return It(t,"yyyy-MM-dd hh:mm")}),new a["a"]({router:$t,store:Et,render:function(t){return t(I)}}).$mount("#app")},"679b":function(t,s,e){"use strict";var a=e("9f11"),i=e.n(a);i.a},"6aca":function(t,s,e){"use strict";var a=e("2029"),i=e.n(a);i.a},"7e6a":function(t,s,e){},"85c5":function(t,s,e){},"865f":function(t,s,e){"use strict";var a=e("198b"),i=e.n(a);i.a},9250:function(t,s,e){"use strict";var a=e("7e6a"),i=e.n(a);i.a},9449:function(t,s,e){"use strict";var a=e("02ca"),i=e.n(a);i.a},"9cc1":function(t,s,e){"use strict";var a=e("85c5"),i=e.n(a);i.a},"9f11":function(t,s,e){},a868:function(t,s,e){},ca40:function(t,s,e){},db51:function(t,s,e){"use strict";var a=e("4af3"),i=e.n(a);i.a},f728:function(t,s,e){"use strict";var a=e("ca40"),i=e.n(a);i.a},f7d0:function(t,s,e){},fb6e:function(t,s,e){"use strict";var a=e("f7d0"),i=e.n(a);i.a}});
//# sourceMappingURL=app.f5b073b2.js.map